<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="blocks/fragments :: head('Checkout - Wish Mart', 'none')"></head>

<div th:insert="~{blocks/fragments :: scripts}"></div>
<script th:src="@{/js/shopping-cart.js}"></script>
<div th:replace="blocks/fragments :: navbar"></div>

<div id="contact-page" class="container">
    <div class="bg">
        <div class="row">
            <div class="col-sm-12">
                <h2 class="title text-center">[[#{checkout.checkoutTitle}]]</h2>

            </div>
        </div>

        <div class="container">
            <div class="row">
                <div class="custom_product col-md-4 col-md-push-8 mb-4 sticky-top">

                        <h2 class="title text-center">[[#{checkout.checkoutYourCart}]]</h2>

                    <ul class="custom_product list-group mb-3 sticky-top">
                        <div class="items" th:each="basketItem: ${orderBaskets}">
                            <div class="product" th:with="product = ${basketItem.product}">
                                <li class="list-group-item d-flex justify-content-between lh-condensed">
                                    <div>
                                        <img th:src="@{'data:image/jpeg;base64,'+${product.imageFile}}"
                                             class="img-responsive center-block image" width="50" height="50" />
                                        <h6 class="my-0">
                                            <a th:text="${product.title}"
                                               th:href="@{'/product/' + ${product.alias}}"></a>
                                        </h6>
                                    </div>
                                    <div class="text-muted">
                                        <span>Rs. </span>
                                        <span class="productSubtotal"
                                              th:id="'subtotal' + ${product.id}">[[${basketItem.subtotal}]]</span>
                                    </div>
                                </li>
                            </div>
                        </div>
                        <li class="list-group-item d-flex justify-content-between">
                            <div class="summary-item"><span class="text">[[#{checkout.total}]]</span>
                                <span class="price" style="margin-left: 70px; font-size: 21px; font-weight: 500;"
                                      id="totalAmount"></span>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="text-center" style="padding-bottom: 15px">
                                <label for="checkoutBtn" class="btn btn-primary"
                                       tabindex="0">[[#{checkout.checkoutLast}]]</label>
                            </div>
                            <span class="grey-text" style="font-size: 12px">[[#{checkout.termsMain}]]
                                <ul class="ml-2">
                                    <li class="ml-3 text-muted">
                                        [[#{checkout.termsFirst}]]
                                    </li>
                                    <li class="ml-3 text-muted">
                                        [[#{checkout.termsSecond}]]
                                    </li>
                                </ul>
                            </span>
                        </li>
                    </ul>
                </div>
                <div class="col-md-8 col-md-pull-4">
                    <h2 class="title text-center">[[#{checkout.contactDetails}]]</h2>
                    <div class="userInfo" th:with="userInfo = ${user.userInfo}">
                        <div class="row ml-4">
                            <div class="col-md-6 mb-3">
                                <label>[[#{checkout.name}]]</label>
                                <span th:text="${userInfo.name}"></span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label>[[#{checkout.surname}]]</label>
                                <span th:text="${userInfo.surname}"></span>
                            </div>
                        </div>
                        <div class="row ml-4">
                            <div class="col-md-6 mb-3">
                                <label>[[#{checkout.email}]]</label>
                                <span th:text="${user.email}"></span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label>[[#{checkout.login}]]</label>
                                <span th:text="${user.login}"></span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label>[[#{checkout.phone}]]</label>
                                <span th:text="${userInfo.phone}"></span>
                            </div>
                        </div>
                    </div>

                    <h2 class="title text-center">[[#{checkout.delivery}]]</h2>

                    <form th:action="@{/payment}" th:object="${order}" method="post">
                        <div class="row ml-4">
                            <div class="col-md-6 mb-3">
                                <label for="address">[[#{checkout.address}]]</label>
                                <input style="width: 300px;" th:field="*{address}" type="text" class="form-control" id="address"
                                       placeholder="Enter your address" required>
                                <div class="invalid-feedback text-muted">
                                    <small>[[#{checkout.errorAddress}]]</small>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="city">[[#{checkout.city}]]</label>
                                <input style="width: 300px;" th:field="*{city}" type="text" class="form-control" id="city"
                                       placeholder="Enter your city" required>
                                <div class="invalid-feedback text-muted">
                                    <small>[[#{checkout.errorCity}]]</small>
                                </div>
                            </div>
                        </div>

                        <h5>[[#{checkout.chooseDelivery}]]</h5>
                        <div class="d-block my-3">
                            <div class="radio ml-4">
                                <label>
                                    <input th:field="*{shippingType}" id="ukrPoshta" name="deliveryMethod" type="radio"
                                           required th:value="0"> [[#{checkout.lkrPost}]]
                                </label>
                            </div>
                            <div class="radio ml-4">
                                <label>
                                    <input th:field="*{shippingType}" id="novaPoshta" name="deliveryMethod" type="radio"
                                           required th:value="1"> [[#{checkout.intPost}]]
                                </label>
                            </div>
                        </div>

                        <h2 class="title text-center">[[#{checkout.paymentTitle}]]</h2>

                        <div class="d-block my-3">
                            <div class="radio ml-4">
                                <label>
                                    <input th:field="*{orderStatus}" id="store" name="paymentMethod" type="radio"
                                           required th:value="${waiting}"> [[#{checkout.paymentFirst}]]
                                </label>
                            </div>

                            <div class="radio ml-4">
                                <label>
                                    <input th:field="*{orderStatus}" id="card" name="paymentMethod" type="radio"
                                           required th:value="${payed}"> [[#{checkout.paymentSecond}]]
                                </label>
                            </div>
                        </div>
                        <input type="submit" id="checkoutBtn" class="hidden"/>
                    </form>
                </div>
            </div>
            <br><br>
        </div>
    <div th:insert="~{blocks/fragments :: additional_footer}"></div>
</div>
</div>
</html>
